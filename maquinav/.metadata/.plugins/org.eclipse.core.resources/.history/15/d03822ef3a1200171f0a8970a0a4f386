/*
 * lvm-v19.c
 *
 *  Created on: 26 de mar de 2017
 *      Author: leoci
 */

#include <stdio.h>
#include <stdlib.h>


int main(int argc, char *argv[]) {
	FILE *file;
	size_t size;
	unsigned char *buffer;
	file = fopen(argv[1], "rb");

	fseek(file, 0, SEEK_END);
	size = ftell(file);
	fseek(file, 0, SEEK_SET);
	buffer = (unsigned char *) malloc(size);

	if (file == NULL) {
		printf("Error: There was an Error reading the file %s \n", argv[1]);
		exit(1);
	} else if (fread(buffer, sizeof *buffer, size, file) != size) {
		printf("Error: There was an Error reading the file %s - %d\n", argv[1],
				size);
		exit(1);
	} else {
		int indice = 0;

				//Palavra chava "baba babe" em hex.
				if (((int) (buffer[indice++]) == 186)
						&& ((int) (buffer[indice++]) == 186)
						&& ((int) (buffer[indice++]) == 186)
						&& ((int) (buffer[indice++]) == 190)) {

				} else {
					printf(
							"Codigo da Leoci Virtual Machine nao encontrado no arquivo %s!\n",
							argv[1]);
					exit(0);
				}

	}

	return 0;
}
